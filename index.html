<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Battery Optimizer Pro</title>
    <style>
        body { background: #000; color: #0f0; font-family: 'Courier New', Courier, monospace; margin: 0; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh; }
        .container { text-align: center; border: 1px solid #0f0; padding: 20px; border-radius: 10px; z-index: 100; background: #000; }
        #start-btn { background: #0f0; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; margin-top: 15px; }
        .flash-red { background-color: #ff0000 !important; }
        #warning-text { display: none; position: absolute; top: 15%; color: #f00; font-size: 2rem; font-weight: bold; text-align: center; width: 100%; z-index: 200; text-shadow: 2px 2px #000; animation: blink 0.2s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
        #scare-img { position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; z-index: 50; pointer-events: none; }
    </style>
</head>
<body>

    <div id="warning-text">CRITICAL ERROR:<br>SYSTEM OVERLOADED</div>

    <div id="interface" class="container">
        <h2>LOW BATTERY?</h2>
        <p>Optimize your system for 100% health.</p>
        <button id="start-btn" onclick="launchPrank()">OPTIMIZE NOW</button>
    </div>

    <img id="scare-img" src="https://i.imgur.com/K1z3s1H.jpeg">

    <audio id="bark-sound" loop>
        <source src="https://www.w3schools.com/html/horse.ogg" type="audio/ogg"> </audio>

    <script>
    async function launchPrank() {
        const audio = document.getElementById('bark-sound');
        
        // Tentative de volume max et lecture
        audio.volume = 1.0;
        audio.play().catch(e => console.log("L'utilisateur doit interagir d'abord"));

        // 1. Fullscreen
        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
        }

        // 2. Changements visuels
        document.getElementById('interface').style.display = 'none';
        document.getElementById('warning-text').style.display = 'block';
        document.getElementById('scare-img').style.opacity = '1';

        // 3. Vibrations saccadées (Simule un bug matériel)
        if ("vibrate" in navigator) {
            setInterval(() => { navigator.vibrate([400, 200, 400, 200]); }, 600);
        }

        // 4. Flash écran (Rouge/Noir)
        setInterval(() => {
            document.body.classList.toggle('flash-red');
        }, 60);

        // 5. Flash Caméra (si autorisé)
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
            const track = stream.getVideoTracks()[0];
            let isOn = false;
            setInterval(async () => {
                isOn = !isOn;
                await track.applyConstraints({ advanced: [{ torch: isOn }] });
            }, 200);
        } catch (e) { }

        // 6. Verrouillage du bouton retour
        window.history.pushState(null, null, window.location.href);
        window.onpopstate = () => { window.history.pushState(null, null, window.location.href); };
    }
    </script>
</body>
</html>
